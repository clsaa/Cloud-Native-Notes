

# 1.DOP

## 1.1.DOP原项目

<https://github.com/XRiver/DevOpsTeachingPlatform>

### 1.1.1.概述

项目一个是面向教学的DevOps平台， 分为5个模块（包括源代码管理模块，项目及用户管理模块，测试模块，使用Jenkins实现流水线模块，使用GitLabCI实现流水线模块），其中服务端代码共14000+行，前端代码较多，很大一部分工作是前端开发。

项目整体比较简单，属于原型类型的小demo，功能实现大多是在GitLab和Jenkins外部套了一层服务端和前端，但UI上功能实现并不如原开源工具UI界面更易用

项目代码质量较差（安昕瑜的还好）

1. 不同模块项目结构差别很大，命名差别很大
2. 不会使用RESTFUL API
3. 基本没有注释
4. 没有统一返回结果

开发时间：2018年3月11日-2018年5月13日，开发人数:据说十几人（github contributors显示6人）

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-174333.png)

### 1.1.2.代码管理模块

整体来说代码结构清晰，可以复用部分代码

功能简单，一些常用的功能（比如，权限方面的功能，TAG相关的功能，项目属性设置相关的功能）没有。

### 1.1.3.测试模块

业务逻辑有问题，需重写。

可以看出这个同学效仿华为云中测试套件的设计。UI界面及操作逻辑相似，但是服务端实现的时候并没有实现类似华为云的测试功能。与此相比不如仿照阿里云做。

### 1.1.4.CI模块

暂时无法评估其可复用程度

不知道为什么分两个（一个jenkins一个gitlabCI）？
只能集成内部代码管理服务？能否使用码云、github等代码仓库？

### 1.1.5.项目及用户管理模块

如果面向用户及设计目标发生变化需要重新设计并实现

## 1.2.DOP课设可选课题

### 1.2.1.概述

DOP、K8S、Istio整体关系如下图所示：

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-DOP%E6%95%B4%E4%BD%93.png)

DOP细节

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-DOP%E7%BB%86%E8%8A%82%E7%9A%84%E5%89%AF%E6%9C%AC.png)

### 1.2.2.代码管理模块

此模块用于管理、存储源代码

一般，此部分内部实现为GitLab，我们做一个UI界面请求服务端，服务端转发请求到GitLab服务。

如果需要在DOP中重现GitLab的常用功能，前端占很大一部分工作量，后端只是转发请求。

这个工作可以通过直接使用gitlab替代

意义评分：2分
工作量评分：4分

### 1.2.3.容器镜像管理模块

此模块用于管理、存储容器镜像。与pipline的关系可以在上边的图中看到

主要包括两方面内容：

1. 私有容器镜像仓库
2. 容器镜像管理（包括前后端）

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-185238.png)

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-185308.png)

可使用dockerhub（镜像构建在pipline中定义）或者阿里容器镜像服务替代

意义评分：3分
工作量评分：3分

### 1.2.4.测试模块

此模块用于构建pipline中具体的测试任务

主要包括两方面内容：

1. 静态代码扫描（安全规约，阿里巴巴开发规约等）
2. 动态代码测试（单元测试，接口测试等）

最后生成测试、扫描报告

意义评分：4分
工作量评分：3分

### 1.2.5.缺陷管理模块

此模块用于代码缺陷管理，如QA提交BUG，RD修复bug，QA进行BUG验证

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-191633.png)

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-191651.png)

此部分功能相对独立，和其他devops工具或流程没有直接关联或者说强关联

意义评分：2分
工作量评分：3分

### 1.2.6.流水线模块

此模块提供流水线功能，是DOP的核心功能，流水线可以中可以加入不同的stage（如构建）和job（如构建过程中进行代码扫描，单元测试）

意义评分：必须实现
工作量评分：5分

### 1.2.7.项目管理模块

此模块用于平台中项目及应用管理；项目管理主要包括整合上述功能（如，缺陷，流水线，测试），基本信息，成员，角色等；应用管理主要包括基本信息，权限，环境，版本，部署等。

项目：一个产品线，由很多服务组成，如天猫
应用：一个具体的服务，如商品服务

意义评分：必须实现
工作量评分：8分

### 1.2.8.用户管理模块

此模块用于用户管理，如用户统一登录（比如第三方代码管理或以后k8s平台需要用一套用户系统），用户组织架构，用户信息维护等

意义评分：5分
工作量评分：4分

## 1.3.K8S平台相关课题考虑

### 1.3.1.K8S管理模块

在阿里云看到一个K8S集群管理控制台，主要功能和开源的相比感觉没太大区别，主要是用户管理方面更容易控制， 用户购买、管理K8S服务更方便。

阿里云版

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-193932.png)

开源版

![image](http://cloud-computing-notes-img-bed-1252032169.cossh.myqcloud.com/2018-11-03-194100.png)

### 1.3.2.K8S监控模块

## 1.4.Istio平台相关课题



